<!DOCTYPE html>
<html lang="en">
<head>	<link href="css/font.css" rel="stylesheet"><title>Sender - Mail Protection</title></head>
<body>
<header  style="position: fixed;top: 0;right: 0;left: 0;background-color: #343a40;color: #fff;">
<a href = "index.html" style="text-decoration:none;color: #fff"><h1 style="margin: 0.5em 5em ;">Mail protection</h1></a>
</header>
      <script src="src/md5.js"></script>
	  <script src="src/xor.js" ></script>
	  <script src="src/gkey.js" ></script>
<script>
window.onload=function(){
var d = new Date();
var n = d.getTime(); 
var uri_dec = decodeURIComponent((window.location.href).split("?")[1]); 
var st = uri_dec.split("#")[0]
var cipher_text = uri_dec.split("#")[1]
var ma = genkey(st)
var cipher_key = ma ; 
var eml= (xor.decrypt(cipher_text,ma))
document.getElementById('eml').innerText = eml 
var d = new Date();
var n = d.getTime()-n; 
document.getElementById('time').innerText = "Decoded in "+n/1000+" second(s)." 
}
</script>

<script>
function send(){
var sul= "mailto:"+document.getElementById("eml").innerText+"?subject="+document.getElementById("ttl").value+"&body="+document.getElementById("bdy").value.replace(/[\n\r]/g,"%0d%0a")+"%0d%0aEmail sent via "+window.location.href
console.log(sul)
window.open(sul)
}
</script>
<div style="margin:80px 10em" >
Mail to: <span id="eml">name@example.com</span><br>
Subject: <br><input type="text" id="ttl" style="width: 100%;" value="title"><br>
Body: <br><textarea id="bdy" style="width: 100%;height: 200px" value="body"></textarea><br>
<button onclick="send()">Send</button><br>
<span id="time"></span><br>
This page was generated by <a target="_blank" href="index.html">Email Protection</a>



</div>

</body>
